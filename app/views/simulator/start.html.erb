<section>
  <h2 class="heading-2-orange text-center">Simulador de</h2>
  <h1 class="heading-1-black text-center">Movilidad Social</h1>
  <%= image_tag "encabezado_salud_1920.png", class: "header-image" %>
</section>

<section class="life-expectancy-section">
  <h3 class="simulator-header-text text-center">¿Cuáles son los años de vida esperados para ti y para tus padres?</h3>
  <p class="text-center text-size-md simulator-paragraph-text">
    <strong>Años totales de vida esperada:</strong> número de años que en promedio se espera que viva una persona a partir de su edad
  </p>

  <hr class="dotted-hr">


  <div class="container">
    <div class="row">
      <div class="col-md-4 text-center">
        <%= image_tag @user.expected_age_image, class: "life-expectancy-image" %>
        <div class="life-expectancy-number-input">
          <p class="life-expectancy-number" style="font-size:1.5rem; color:#215862"><%= @user.expected_age %> años</p>
        </div>
      </div>

      <div class="col-md-4 text-center">
        <%= image_tag "esperanza_vida_madre.png", class: "life-expectancy-image" %>
        <div class="life-expectancy-number-input">
          <p class="life-expectancy-number" style="font-size:1.5rem; color:#60dac7"><%= @user.mother_expected_age %> años</p>
        </div>
      </div>

      <div class="col-md-4 text-center">
        <%= image_tag "esperanza_vida_padre.png", class: "life-expectancy-image" %>
        <div class="life-expectancy-number-input">
          <p class="life-expectancy-number" style="font-size:1.5rem; color:rgb(245, 133, 49)" ><%= @user.father_expected_age %> años</p>
        </div>
      </div>
      <p class="text-size-md health-paragraph-text-black text-center" style="margin-top:30px">Los años de vida esperados de los padres son, generalmente mayores porque han superado periodos de riesgo, como los accidentes en la adolescencia.</p>
    </div>
  </div>

</section>
<section class="healthy">
  <h3 class="heading-2-orange text-center">CUÍDATE</h3>
  <p class="text-size-lg health-paragraph-text-black text-center">La mayoría de los jovenes goza de buena salud,<br>
  pero la <span class="text-size-lg health-paragraph-text text-center">mortalidad prematura </span>
  es considerablemente alta por:</p>

  <div class="row health-images">

    <div class="col-md-2">
      <%= image_tag "accidente.png",  class: 'health-image' %>
      <div class="row">
        <div class="col-md-9">
          <p class="text-size-md text-center">
            accidentes de tránsito
          </p>
        </div>
      </div>
    </div>

    <div class="col-md-2">
      <%= image_tag "drogas.png", class: 'health-image' %>
      <div class="row">
        <div class="col-md-9">
          <p class="text-size-md text-center">
            consumo de drogas
          </p>
        </div>
      </div>
    </div>

    <div class="col-md-2">
      <%= image_tag "obeso.png", class: 'health-image'%>
      <div class="row">
        <div class="col-md-9">
          <p class="text-size-md text-center">
            falta de actividad física
          </p>
        </div>
      </div>
    </div>

    <div class="col-md-2">
      <%= image_tag "condon.png",  class: 'health-image' %>
      <div class="row">
        <div class="col-md-9">
          <p class="text-size-md text-center">
            relaciones sexuales sin protección
          </p>
        </div>
      </div>
    </div>

    <div class="col-md-2">
      <%= image_tag "violencia.png",  class: 'health-image' %>
      <div class="row">
        <div class="col-md-9">
          <p class="text-size-md text-center">
            exposición a la violencia
          </p>
        </div>
      </div>
    </div>

    </div>

    <p class="text-size-xs health-paragraph-text-black text-center">Referencia: Organización Mundial de la Salud. (13 de diciembre de 2018). Adolescentes: riesgos para la salud y soluciones</p>

</section>

<section class="simulator-header-section">
  <h3 class="simulator-header-text text-center">¿Cómo estás con respecto a <%= @user.sex_text %> de tu generación?</h3>
</section>

<section class="map-header-section">
  <h3 class="simulator-header-text text-center" style="margin-top:0.5rem" >Máximo de años de vida esperados en...</h3>


  <div class="row map-full" style="margin-top:50px"> 
    <div class="col-md-5 my-auto" style="margin-left:680px; "> 
      <p class="map-paragraph-text" style="color:white; margin-top:70px; font-size: 22px">
        el mundo
        <span class="block-map"><%= @user.world_expected_age %> años</span> 
      </p>
    </div>
    <div class="col-md-5 my-auto" style="margin-left:680px; "> 
      <p class=" map-paragraph-text" style="color:white; margin-top: 30px;font-size: 22px">
        en México
        <span class="block-map"><%= @user.country_expected_age %> años</span>
      </p>
    </div>
    <div class="col-md-5 my-auto" style="margin-left:680px; ">
      <div class="row">
        <div class="col-sm-7 my-auto" style="margin-top:60px; margin-left: -30px; font-size:20px">
        <p class=" map-paragraph-text" style="color:white;" >
            la región <%= @user.region %></p>
            
        </div>
        <div class="col-sm-4 my auto" style="margin-top:30px; margin-left:-80px; font-size:22px">
        <span class="block-map" ><%= @user.region_expected_age %> años</span>
        <%= @user.region_states %>
        </div>
        
        
      </div>
    </div>
  </div>

</section>

<section class="simulator-header-section">
  <h3 class="simulator-header-text text-center">¿Y qué pasa si continúas estudiando?</h3>
</section>

<section class="health-simulation-section">
  <p class="text-center text-size-md simulator-paragraph-text">
    Usa la barra para avanzar en el logro escolar y revisa los resultados
  </p>

  <hr class="dotted-hr">

  <div class="container">
    <div class="row">
      <% EducationLevel.with_education.each do |education_level| %>
        <div class="col-2 <%= "offset-1" if education_level.id == 1 %>">
          <figure>
            <%= simulator_user_image(education_level.id, @user.education_level, @user.sex, :salud) %>
            <figcaption><br /><%= education_level.description %></figcaption>
          </figure>
        </div>
      <% end %>
    </div>
    <div class="row">
      <input type="range" step="1" min="<%=  @user.education_level %>" max="5" value="<%= @user.education_level %>" onchange="updateKpis(this.value)">
    </div>

    <div class="row" style="height: 100px">

      <div class="col-12 background-teal">
        <div class="row" style="justify-content: center">
          <div class="col-md-2 simulation-results text-center">
            <%= image_tag "esperanza.png", class: "health-icon" %>
          </div>
          <div class="col-md-3 simulation-results" style="margin-right:-80px">
            <p class="text-uppercase life-expectancy-text">Años de vida esperados</p>
          </div>
          <div class="col-md-1 white-box text-center">
            <p class="life-expectancy-number-text" id="life-expectancy"><%= @user.expected_age %></p>
          </div>
        </div>
      </div>

    </div>

  </div>
</section>

<section class="print-section text-center">
  <button class="btn btn-primary print-button">Imprimir</button>

</section>

<%= render "shared/benefit_sections", background_dark: true, health_enabled: true, education_enabled: @user.filled_out_all_parts?, work_enabled: @user.filled_out_all_parts? %>

<%= render "shared/footer" %>

<script charset="utf-8">
  function updateKpis(education_level) {
    Rails.ajax({
      url: "/kpis/health?education_level_id=" + education_level,
      type: "get",
      success: function(data) {
        document.getElementById("life-expectancy").innerHTML = data["life_expectancy"];
      },
      error: function(data) { console.log("error: ver logs del servidor"); }
    });
  }
</script>
